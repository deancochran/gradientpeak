{
  "id": "0fbfb8f5-2222-4302-9939-d72cbdaf5e8d",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.activities": {
      "name": "activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "local_storage_path": {
          "name": "local_storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cloud_storage_path": {
          "name": "cloud_storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sync_status": {
          "name": "sync_status",
          "type": "sync_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'local_only'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "activities_profile_id_profiles_id_fk": {
          "name": "activities_profile_id_profiles_id_fk",
          "tableFrom": "activities",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "activities_idx_unique": {
          "name": "activities_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.activity_results": {
      "name": "activity_results",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "activity_id": {
          "name": "activity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "total_time": {
          "name": "total_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "moving_time": {
          "name": "moving_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "snapshot_weight_kg": {
          "name": "snapshot_weight_kg",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "snapshot_ftp": {
          "name": "snapshot_ftp",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "snapshot_threshold_hr": {
          "name": "snapshot_threshold_hr",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "tss": {
          "name": "tss",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "ctl": {
          "name": "ctl",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "atl": {
          "name": "atl",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tsb": {
          "name": "tsb",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "normalized_power": {
          "name": "normalized_power",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "avg_power": {
          "name": "avg_power",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "peak_power": {
          "name": "peak_power",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "intensity_factor": {
          "name": "intensity_factor",
          "type": "numeric(4, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "variability_index": {
          "name": "variability_index",
          "type": "numeric(4, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "avg_heart_rate": {
          "name": "avg_heart_rate",
          "type": "numeric(4, 0)",
          "primaryKey": false,
          "notNull": false
        },
        "max_heart_rate": {
          "name": "max_heart_rate",
          "type": "numeric(4, 0)",
          "primaryKey": false,
          "notNull": false
        },
        "avg_cadence": {
          "name": "avg_cadence",
          "type": "numeric(4, 0)",
          "primaryKey": false,
          "notNull": false
        },
        "max_cadence": {
          "name": "max_cadence",
          "type": "numeric(4, 0)",
          "primaryKey": false,
          "notNull": false
        },
        "distance": {
          "name": "distance",
          "type": "numeric(8, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "avg_speed": {
          "name": "avg_speed",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "max_speed": {
          "name": "max_speed",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_ascent": {
          "name": "total_ascent",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_descent": {
          "name": "total_descent",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "adherence_score": {
          "name": "adherence_score",
          "type": "numeric(4, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "workout_match": {
          "name": "workout_match",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "activity_results_activity_id_activities_id_fk": {
          "name": "activity_results_activity_id_activities_id_fk",
          "tableFrom": "activity_results",
          "tableTo": "activities",
          "columnsFrom": [
            "activity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "activity_results_idx_unique": {
          "name": "activity_results_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.activity_streams": {
      "name": "activity_streams",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "activity_id": {
          "name": "activity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "resolution": {
          "name": "resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "original_size": {
          "name": "original_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "double precision[]",
          "primaryKey": false,
          "notNull": false
        },
        "data_latlng": {
          "name": "data_latlng",
          "type": "double precision[][]",
          "primaryKey": false,
          "notNull": false
        },
        "data_moving": {
          "name": "data_moving",
          "type": "boolean[]",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "activity_streams_activity_id_activities_id_fk": {
          "name": "activity_streams_activity_id_activities_id_fk",
          "tableFrom": "activity_streams",
          "tableTo": "activities",
          "columnsFrom": [
            "activity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "activity_streams_idx_unique": {
          "name": "activity_streams_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        },
        "uq_activity_stream_type": {
          "name": "uq_activity_stream_type",
          "nullsNotDistinct": false,
          "columns": [
            "activity_id",
            "type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "resolution_check": {
          "name": "resolution_check",
          "value": "\"activity_streams\".\"resolution\" in ('low', 'medium', 'high')"
        }
      },
      "isRLSEnabled": false
    },
    "public.planned_activities": {
      "name": "planned_activities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "profile_plan_id": {
          "name": "profile_plan_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_date": {
          "name": "scheduled_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "activity_type": {
          "name": "activity_type",
          "type": "activity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "structure": {
          "name": "structure",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "structure_version": {
          "name": "structure_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1.0'"
        },
        "requires_ftp": {
          "name": "requires_ftp",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "requires_threshold_hr": {
          "name": "requires_threshold_hr",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "estimated_duration": {
          "name": "estimated_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_tss": {
          "name": "estimated_tss",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "completion_status": {
          "name": "completion_status",
          "type": "completion_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "completed_activity_id": {
          "name": "completed_activity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "completion_date": {
          "name": "completion_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "planned_activities_profile_id_profiles_id_fk": {
          "name": "planned_activities_profile_id_profiles_id_fk",
          "tableFrom": "planned_activities",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "planned_activities_profile_plan_id_profile_plans_id_fk": {
          "name": "planned_activities_profile_plan_id_profile_plans_id_fk",
          "tableFrom": "planned_activities",
          "tableTo": "profile_plans",
          "columnsFrom": [
            "profile_plan_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "planned_activities_idx_unique": {
          "name": "planned_activities_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.profile_plans": {
      "name": "profile_plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plan_type": {
          "name": "plan_type",
          "type": "plan_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'custom'"
        },
        "status": {
          "name": "status",
          "type": "plan_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "snapshot_weight_kg": {
          "name": "snapshot_weight_kg",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "snapshot_ftp": {
          "name": "snapshot_ftp",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "snapshot_threshold_hr": {
          "name": "snapshot_threshold_hr",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "config_version": {
          "name": "config_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1.0'"
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "completion_percentage": {
          "name": "completion_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "profile_plans_profile_id_profiles_id_fk": {
          "name": "profile_plans_profile_id_profiles_id_fk",
          "tableFrom": "profile_plans",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "profile_plans_idx_unique": {
          "name": "profile_plans_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "idx": {
          "name": "idx",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "threshold_hr": {
          "name": "threshold_hr",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ftp": {
          "name": "ftp",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dob": {
          "name": "dob",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "language": {
          "name": "language",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'en'"
        },
        "preferred_units": {
          "name": "preferred_units",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'metric'"
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "onboarded": {
          "name": "onboarded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "last_ftp_update": {
          "name": "last_ftp_update",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_threshold_hr_update": {
          "name": "last_threshold_hr_update",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp (3)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "profiles_idx_unique": {
          "name": "profiles_idx_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idx"
          ]
        },
        "profiles_username_unique": {
          "name": "profiles_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "gender_check": {
          "name": "gender_check",
          "value": "\"profiles\".\"gender\" in ('male', 'female', 'other')"
        },
        "preferred_units_check": {
          "name": "preferred_units_check",
          "value": "\"profiles\".\"preferred_units\" in ('metric', 'imperial')"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.sync_status": {
      "name": "sync_status",
      "schema": "public",
      "values": [
        "local_only",
        "syncing",
        "synced",
        "sync_failed"
      ]
    },
    "public.activity_type": {
      "name": "activity_type",
      "schema": "public",
      "values": [
        "bike",
        "run",
        "swim",
        "strength",
        "other"
      ]
    },
    "public.completion_status": {
      "name": "completion_status",
      "schema": "public",
      "values": [
        "pending",
        "completed",
        "skipped"
      ]
    },
    "public.plan_status": {
      "name": "plan_status",
      "schema": "public",
      "values": [
        "draft",
        "active",
        "completed",
        "paused"
      ]
    },
    "public.plan_type": {
      "name": "plan_type",
      "schema": "public",
      "values": [
        "base",
        "build",
        "peak",
        "recovery",
        "custom"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}