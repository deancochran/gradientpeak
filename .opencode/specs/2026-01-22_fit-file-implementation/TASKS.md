# Tasks: FIT File Implementation

## Task List

### Phase 1: Core Parser

- [ ] 1.1 Set up `packages/core/fit/` directory structure
- [ ] 1.2 Implement core parser with `@garmin/fitsdk`
- [ ] 1.3 Add TypeScript type definitions
- [ ] 1.4 Implement data transformation utilities
- [ ] 1.5 Add error handling classes
- [ ] 1.6 Write unit tests (95% coverage target)
- [ ] 1.7 Create test fixtures

### Phase 2: Server Integration

- [ ] 2.1 Refactor edge function to use new parser
- [ ] 2.2 Implement metrics calculation
- [ ] 2.3 Add polyline generation
- [ ] 2.4 Implement stream compression
- [ ] 2.5 Update tRPC router with new types
- [ ] 2.6 Add error handling improvements

### Phase 3: Mobile Preview

- [ ] 3.1 Create mobile FIT parser service
- [ ] 3.2 Implement memory guards
- [ ] 3.3 Create React hook for async parsing
- [ ] 3.4 Add file picker integration
- [ ] 3.5 Implement upload with progress
- [ ] 3.6 Create preview UI component

### Phase 4: Testing & Documentation

- [ ] 4.1 Complete integration tests
- [ ] 4.2 Add E2E tests for import flow
- [ ] 4.3 Run performance benchmarks
- [ ] 4.4 Update documentation
- [ ] 4.5 Final code review and polish
